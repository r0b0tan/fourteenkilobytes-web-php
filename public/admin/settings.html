<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - fourteenkilobytes</title>
  <link rel="icon" type="image/png" sizes="32x32" href="/admin/favicon-32x32.png">
  <link rel="stylesheet" href="/admin/style.css">
  <link rel="modulepreload" href="/admin/i18n.js">
  <link rel="modulepreload" href="/admin/app.js">
  <link rel="modulepreload" href="/admin/settings.js">
  <link rel="modulepreload" href="/admin/lib/common.js">
  <link rel="modulepreload" href="/admin/lib/css-utils.js">
  <link rel="modulepreload" href="/admin/lib/byte-utils.js">
  <link rel="modulepreload" href="/admin/lib/settings-utils.js">
  <link rel="modulepreload" href="/admin/lib/content-utils.js">
  <script type="module" src="/admin/i18n.js"></script>
</head>

<body>
  <!-- Loading Overlay (shown until settings are loaded) -->
  <div id="loading-overlay" class="loading-overlay instant">
    <div class="loading-state">
      <div class="loading-spinner"></div>
      <span>Loading...</span>
    </div>
  </div>

  <!-- Use semantic header element for better document structure -->
  <header class="header">
    <div class="header-top">
      <!-- Logo with improved accessibility -->
      <div class="logo-container">
        <a href="/admin/index.html" class="logo" aria-label="14KB Dashboard">
          <!-- SVG uses currentColor to inherit accent from CSS -->
          <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="32" height="32"
            viewBox="0 0 191.000000 191.000000" preserveAspectRatio="xMidYMid meet" aria-hidden="true">
            <g transform="translate(0.000000,191.000000) scale(0.100000,-0.100000)" fill="currentColor" stroke="none">
              <path d="M406 1889 c-175 -35 -325 -178 -371 -356 -21 -81 -22 -1071 -1 -1149
47 -176 194 -315 374 -353 61 -13 1058 -16 1066 -3 2 4 -22 29 -55 55 -67 54
-152 157 -220 265 -24 39 -46 71 -49 72 -3 0 -18 -21 -34 -46 -41 -65 -64 -78
-116 -64 -63 17 -74 3 -65 -82 5 -57 4 -69 -10 -74 -24 -10 -45 15 -45 54 0
34 -1 34 -19 18 -10 -9 -21 -31 -25 -47 -5 -26 -10 -30 -33 -27 -23 2 -29 8
-31 35 -3 27 1 35 22 44 26 12 40 35 30 50 -9 16 -22 10 -58 -27 -40 -41 -72
-40 -82 2 -8 31 5 46 54 59 49 14 52 37 7 54 -19 7 -40 9 -45 6 -29 -18 -54
47 -28 73 17 17 35 15 66 -8 15 -12 41 -22 57 -23 28 -2 30 0 27 28 -8 85 -7
89 12 93 24 5 46 -23 46 -58 0 -37 29 -60 75 -60 51 0 69 18 101 106 l27 74
-19 42 c-26 59 -98 111 -196 143 -68 23 -91 36 -129 75 -58 59 -82 121 -109
278 -33 194 -24 242 44 242 36 0 242 -68 310 -102 87 -43 125 -102 140 -218 9
-60 39 -108 79 -125 20 -8 76 -15 138 -16 57 -1 142 -8 188 -15 46 -8 87 -12
90 -9 9 10 1 84 -14 119 -8 20 -25 41 -37 47 -20 11 -25 8 -55 -27 -27 -33
-35 -37 -50 -28 -10 6 -19 22 -21 36 -2 20 5 30 33 47 45 26 37 45 -16 38 -44
-6 -75 18 -65 51 9 29 30 33 70 17 57 -24 63 -18 22 24 -40 41 -44 66 -13 85
24 15 49 -2 59 -41 4 -17 15 -36 23 -43 21 -18 31 12 17 56 -8 27 -7 37 5 49
36 37 68 5 59 -58 -5 -32 -3 -47 8 -56 11 -9 18 -6 35 16 40 54 41 54 62 42
28 -15 22 -60 -11 -76 -57 -28 -65 -87 -25 -201 28 -82 31 -131 10 -171 -16
-31 -33 -41 -71 -41 -14 0 -34 -5 -45 -11 -26 -13 -15 -27 61 -79 30 -21 91
-70 135 -109 44 -39 85 -71 92 -71 20 0 18 909 -2 1003 -15 73 -58 162 -106
221 -40 48 -135 112 -207 139 -55 21 -71 22 -587 23 -305 1 -551 -2 -579 -7z" />
            </g>
          </svg>
          <!-- Stacked wordmark for compact branding -->
          <span class="logo-text" aria-hidden="true">14<br>KB</span>
        </a>
      </div>
      <!-- Semantic nav with improved structure -->
      <nav class="header-nav" aria-label="Main navigation">
        <a href="/admin/index.html" class="nav-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            aria-hidden="true">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
            <polyline points="9 22 9 12 15 12 15 22" />
          </svg>
          <span data-i18n="nav.overview">Overview</span>
        </a>
        <a href="/admin/editor.html" class="nav-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            aria-hidden="true">
            <line x1="12" y1="5" x2="12" y2="19" />
            <line x1="5" y1="12" x2="19" y2="12" />
          </svg>
          <span data-i18n="nav.new">New</span>
        </a>
        <a href="/admin/settings.html" class="nav-icon active" aria-current="page">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            aria-hidden="true">
            <circle cx="12" cy="12" r="3" />
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
          </svg>
          <span data-i18n="nav.settings">Settings</span>
        </a>
        <a href="/" target="_blank" rel="noopener" class="nav-icon external-link">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            aria-hidden="true">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
            <polyline points="15 3 21 3 21 9" />
            <line x1="10" y1="14" x2="21" y2="3" />
          </svg>
          <span data-i18n="nav.blog">Blog</span>
        </a>
        <!-- Visual separator before logout -->
        <span class="nav-separator" aria-hidden="true"></span>
        <a href="#" id="logout-btn" class="nav-icon logout-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            aria-hidden="true">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
            <polyline points="16 17 21 12 16 7" />
            <line x1="21" y1="12" x2="9" y2="12" />
          </svg>
          <span data-i18n="nav.logout">Logout</span>
        </a>
      </nav>
    </div>
    <h1 class="page-title" data-i18n="pages.settings">Settings</h1>
  </header>

  <!-- Settings Card -->
  <div class="editor-card">
    <div class="card-header">
      <div class="settings-tabs">
        <button type="button" class="tab-btn active" data-tab="general" data-i18n="tabs.general">General</button>
        <button type="button" class="tab-btn" data-tab="header" data-i18n="tabs.header">Header</button>
        <button type="button" class="tab-btn" data-tab="footer" data-i18n="tabs.footer">Footer</button>
        <button type="button" class="tab-btn" data-tab="bloglist" data-i18n="tabs.bloglist">Bloglist</button>
        <button type="button" class="tab-btn" data-tab="css" data-i18n="tabs.css">CSS</button>
        <button type="button" class="tab-btn" data-tab="optimizations" data-i18n="tabs.optimizations">Optimizations</button>
        <button type="button" class="tab-btn" data-tab="rss" data-i18n="tabs.rss">RSS</button>
        <button type="button" class="tab-btn" data-tab="data" data-i18n="tabs.data">Data</button>
        <button type="button" class="tab-btn" data-tab="logs" data-i18n="tabs.logs">Logs</button>
      </div>
      <div class="settings-actions">
        <button id="discard-btn" class="btn btn-secondary hidden">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
          </svg>
          <span data-i18n="settings.discard">Discard</span>
        </button>
        <button id="save-btn" class="btn btn-primary" disabled>
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
            <polyline points="17 21 17 13 7 13 7 21"></polyline>
            <polyline points="7 3 7 8 15 8"></polyline>
          </svg>
          <span data-i18n="settings.save">Save</span>
        </button>
      </div>
    </div>
    <div class="card-body">
      <!-- General Tab -->
      <div id="tab-general" class="tab-content active">
        <!-- Language Section -->
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.language">SPRACHE</h3>
          <div id="language-editor" class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.languageHint">Änderungen erfordern Seiten-Neuladen</p>
            <div class="form-group">
              <label for="admin-language" data-i18n="settings.languageLabel">Sprache</label>
              <select id="admin-language" class="homepage-select">
                <option value="en">English</option>
                <option value="de">Deutsch</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Homepage Section -->
        <div class="override-section">
          <h3 class="override-section-title" data-i18n="settings.homepage">STARTSEITE</h3>
          <div id="homepage-editor" class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.homepageHint">Wähle eine Seite, die als Startseite (/) angezeigt werden soll</p>
            <div class="form-group">
              <label for="homepage-select" data-i18n="settings.homepageLabel">Startseite</label>
              <div style="display: flex; gap: 8px; align-items: flex-end;">
                <div style="flex: 1;">
                  <select id="homepage-select" class="homepage-select">
                    <option value="" data-i18n="settings.homepageDefault">— Keine Homepage ausgewählt —</option>
                  </select>
                </div>
                <button type="button" id="regenerate-homepage-btn" class="btn btn-secondary" style="display: none;">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"></polyline>
                    <polyline points="1 20 1 14 7 14"></polyline>
                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                  </svg>
                  <span data-i18n="settings.homepageRegenerate">Aktualisieren</span>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Favicon Section -->
        <div class="override-section">
          <h3 class="override-section-title" data-i18n="settings.favicon">FAVICON</h3>
          <div id="favicon-editor" class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.faviconHint">Small icon displayed in the browser tab (max. 4KB, embedded as Base64)</p>
            <div class="favicon-editor-content">
              <div class="favicon-preview-container">
                <div id="favicon-preview" class="favicon-preview">
                  <span class="favicon-placeholder" data-i18n="settings.faviconNone">No favicon</span>
                </div>
              </div>
              <div class="favicon-actions">
                <label class="btn btn-secondary">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                  </svg>
                  <span data-i18n="settings.faviconUpload">Upload</span>
                  <input type="file" id="favicon-input" accept="image/png,image/x-icon,image/svg+xml,image/gif" hidden>
                </label>
                <button type="button" id="favicon-remove" class="btn btn-danger hidden">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                  </svg>
                  <span data-i18n="settings.faviconRemove">Remove</span>
                </button>
              </div>
              <input type="hidden" id="favicon-data">
            </div>
          </div>
        </div>
      </div>

      <!-- Header Tab -->
      <div id="tab-header" class="tab-content hidden">
        <!-- Site Title Section -->
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.siteTitle">Site Title</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="site-title-enabled">
              <span data-i18n="settings.siteTitleEnable">Enable site title</span>
            </label>
          </div>
          <div id="site-title-editor" class="override-editor hidden">
            <p class="text-small text-muted mb-1" data-i18n="settings.siteTitleHint">Global title displayed in browser tab (Format: Title | Site Title)</p>
            <div class="form-group">
              <input type="text" id="site-title" maxlength="60" placeholder="fourteenkilobytes">
            </div>
          </div>
        </div>

        <!-- Navigation Section -->
        <div class="override-section">
          <h3 class="override-section-title" data-i18n="settings.navigation">Navigation</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="header-enabled">
              <span data-i18n="settings.navigationEnable">Enable navigation</span>
            </label>
          </div>
          <div id="header-editor" class="override-editor hidden">
            <p class="text-small text-muted mb-1" data-i18n="settings.navigationHint">Navigation links (appear on every page)</p>
            <div class="nav-editor-row">
              <div id="header-links" class="nav-links"></div>
              <button type="button" id="add-header-link" class="btn btn-secondary" data-i18n="settings.navigationAddLink">+ Link</button>
            </div>
          </div>
        </div>

        <!-- Meta Section -->
        <div class="override-section">
          <h3 class="override-section-title" data-i18n="settings.meta">Meta</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="meta-enabled">
              <span data-i18n="settings.metaEnable">Enable meta</span>
            </label>
          </div>
          <div id="meta-editor" class="override-editor hidden">
            <p class="text-small text-muted mb-1" data-i18n="settings.metaHint">Global SEO tags embedded in the &lt;head&gt; of every page (can be overridden per page)</p>
            <div class="meta-row">
              <div class="form-group">
                <label for="meta-description" data-i18n="settings.metaDescription">Description</label>
                <input type="text" id="meta-description" maxlength="160"
                  data-i18n-placeholder="settings.metaDescriptionPlaceholder" placeholder="A short description of your blog...">
              </div>
              <div class="form-group">
                <label for="meta-author" data-i18n="settings.metaAuthor">Author</label>
                <input type="text" id="meta-author" maxlength="100" data-i18n-placeholder="settings.metaAuthorPlaceholder" placeholder="John Doe">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Footer Tab -->
      <div id="tab-footer" class="tab-content hidden">
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.footerSection">Footer</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="footer-enabled">
              <span data-i18n="settings.footerEnable">Enable footer</span>
            </label>
          </div>
          <div id="footer-editor" class="override-editor hidden">
            <p class="text-small text-muted mb-1" data-i18n="settings.footerHint">Footer text (HTML allowed, {{bytes}} for byte counter)</p>
            <div class="footer-editor-row">
              <input type="text" id="footer-content" placeholder="© 2026 | {{bytes}}/14336 bytes">
              <button type="button" id="insert-bytes-btn" class="btn btn-secondary" data-i18n="settings.footerBytesBtn">{{bytes}}</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Bloglist Tab -->
      <div id="tab-bloglist" class="tab-content hidden">
        <!-- Limit Section -->
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.bloglistLimit">POST LIMIT</h3>
          <div id="bloglist-limit-editor" class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.bloglistLimitHint">Maximum number of posts shown in bloglist blocks</p>
            <div class="form-group">
              <label for="bloglist-limit" data-i18n="settings.bloglistLimitLabel">Limit</label>
              <input type="number" id="bloglist-limit" min="1" max="100" value="10" style="width: 100px;">
            </div>
          </div>
        </div>

        <!-- Archive Section -->
        <div class="override-section">
          <h3 class="override-section-title" data-i18n="settings.bloglistArchive">ARCHIVE PAGE</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="archive-enabled" checked>
              <span data-i18n="settings.archiveEnable">Enable automatic archive page</span>
            </label>
          </div>
        </div>

        <!-- Archive URL Section -->
        <div class="override-section" id="archive-url-section">
          <h3 class="override-section-title" data-i18n="settings.archiveUrlSection">ARCHIVE URL</h3>
          <div id="archive-url-editor" class="override-editor" style="display: block;">
            <div class="form-group">
              <label for="archive-slug" data-i18n="settings.archiveSlug">Archive URL</label>
              <div style="display: flex; align-items: center; gap: 8px;">
                <span class="text-muted">/</span>
                <input type="text" id="archive-slug" value="archive" style="flex: 1; max-width: 200px;">
                <button type="button" id="recompile-archive-btn" class="btn btn-secondary">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"></polyline>
                    <polyline points="1 20 1 14 7 14"></polyline>
                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                  </svg>
                  <span data-i18n="settings.archiveRecompile">Rekompilieren</span>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Archive Link Text Section -->
        <div class="override-section" id="archive-link-text-section">
          <h3 class="override-section-title" data-i18n="settings.archiveLinkTextSection">ARCHIVE LINK TEXT</h3>
          <div id="archive-link-text-editor" class="override-editor" style="display: block;">
            <div class="form-group">
              <label for="archive-link-text" data-i18n="settings.archiveLinkText">Archive link text</label>
              <input type="text" id="archive-link-text" value="View all posts →">
            </div>
          </div>
        </div>
      </div>

      <!-- CSS Tab -->
      <div id="tab-css" class="tab-content hidden">
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.cssTemplates">CSS Templates</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="css-enabled">
              <span data-i18n="settings.cssEnable">Use global CSS</span>
            </label>
          </div>
          <div id="css-editor" class="hidden">
            <div class="css-select-box">
              <p class="text-small text-muted mb-1" data-i18n="settings.cssHint">Select a template or use custom CSS</p>
              <select id="css-mode" class="css-template-select">
                <option value="default" data-i18n="settings.cssDefault">Default</option>
                <option value="light" data-i18n="settings.cssLight">Light</option>
                <option value="dark" data-i18n="settings.cssDark">Dark</option>
                <option value="custom" data-i18n="settings.cssCustom">Custom CSS</option>
              </select>
            </div>

            <!-- Preview for presets -->
            <div id="css-preset-preview" class="css-preview">
              <p class="text-small text-muted mb-1">
                <span data-i18n="settings.cssPreviewFor">Preview for</span> <span id="css-preview-filename">fourteenkilobytes-default.css</span> <span class="text-muted" data-i18n="settings.cssReadOnly">(Read only)</span>
              </p>
              <pre id="css-preview-content" class="css-preview-code"></pre>
            </div>

            <!-- Custom CSS editor -->
            <div id="css-custom-editor" class="hidden">
              <p class="text-small text-muted mb-1" data-i18n="settings.cssCustomHint">Custom CSS rules (embedded in every page)</p>
              <textarea id="global-css" rows="12" placeholder="body {
  font-family: Georgia, serif;
  max-width: 600px;
  margin: 0 auto;
}"></textarea>
            </div>

            <!-- Page Width -->
            <div class="form-group" style="margin-top: 1rem;">
              <label for="page-width" data-i18n="settings.pageWidth">Page Width</label>
              <p class="text-small text-muted mb-1" data-i18n="settings.pageWidthHint">Override body max-width (e.g. 42rem, 800px, 90%)</p>
              <input type="text" id="page-width" placeholder="42rem" maxlength="20" style="max-width: 12rem;">
            </div>
          </div>
        </div>
      </div>

      <!-- Optimizations Tab -->
      <div id="tab-optimizations" class="tab-content hidden">
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.optimizationsCompression">COMPRESSION</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="compression-enabled">
              <span data-i18n="settings.optimizationsCompressionEnable">Enable compression</span>
            </label>
          </div>
          <div id="compression-editor" class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.optimizationsCompressionHint">Minifies HTML and inline CSS during publish to save bytes.</p>
          </div>
        </div>

        <div class="override-section">
          <h3 class="override-section-title" data-i18n="settings.optimizationsClassMangling">CLASS MANGLING</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="class-mangling-enabled">
              <span data-i18n="settings.optimizationsClassManglingEnable">Enable class mangling</span>
            </label>
          </div>
          <div class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.optimizationsClassManglingHint">Shortens compiler-generated class names for smaller raw HTML/CSS output.</p>
            <div class="optimization-mode-box">
              <label for="class-mangling-mode" data-i18n="settings.optimizationsClassManglingModeLabel">Mangling mode</label>
              <p class="text-small text-muted optimization-mode-hint">
                <span class="optimization-mode-hint-line" data-i18n="settings.optimizationsClassManglingModeHintLine1">Safe mangles layout/section classes only.</span>
                <span class="optimization-mode-hint-line" data-i18n="settings.optimizationsClassManglingModeHintLine2">Aggressive also mangles bloglist and pagination classes.</span>
              </p>
              <select id="class-mangling-mode" class="optimization-mode-select">
                <option value="safe" data-i18n="settings.optimizationsClassManglingModeSafe">Safe</option>
                <option value="aggressive" data-i18n="settings.optimizationsClassManglingModeAggressive">Aggressive</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- RSS Tab -->
      <div id="tab-rss" class="tab-content hidden">
        <!-- RSS Feed Section -->
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.rssSection">RSS FEED</h3>
          <div class="override-section-header">
            <label class="override-toggle">
              <input type="checkbox" id="rss-enabled">
              <span data-i18n="settings.rssEnable">RSS Feed aktivieren</span>
            </label>
          </div>
          <div id="rss-editor" class="override-editor hidden">
            <p class="text-small text-muted mb-1" data-i18n="settings.rssHint">RSS feed for your blog posts</p>
            <div class="form-group">
              <label for="rss-site-url" data-i18n="settings.rssSiteUrl">Website URL *</label>
              <input type="url" id="rss-site-url" placeholder="https://example.com">
            </div>
          </div>
        </div>

        <!-- RSS URL Section -->
        <div class="override-section" id="rss-url-section" style="display: none;">
          <h3 class="override-section-title" data-i18n="settings.rssFeedUrlSection">FEED URL</h3>
          <div id="rss-url-editor" class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.rssFeedUrlHint">Ihr generierter RSS Feed</p>
            <div class="form-group">
              <label for="rss-feed-url-preview" data-i18n="settings.rssFeedUrl">Feed URL</label>
              <div class="rss-url-row">
                <input type="text" id="rss-feed-url-preview" readonly>
                <button type="button" id="rss-copy-btn" class="btn btn-secondary">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                  </svg>
                  <span data-i18n="settings.rssCopy">Kopieren</span>
                </button>
                <a id="rss-preview-link" href="#" target="_blank" class="btn btn-secondary">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                    <polyline points="15 3 21 3 21 9"></polyline>
                    <line x1="10" y1="14" x2="21" y2="3"></line>
                  </svg>
                  <span data-i18n="settings.rssOpen">Öffnen</span>
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- RSS Settings Section -->
        <div class="override-section" id="rss-settings-section" style="display: none;">
          <h3 class="override-section-title" data-i18n="settings.rssSettingsSection">EINSTELLUNGEN</h3>
          <div id="rss-settings-editor" class="override-editor" style="display: block;">
            <p class="text-small text-muted mb-1" data-i18n="settings.rssSettingsHint">Feed-Konfiguration und Metadaten</p>
            <div class="rss-settings-grid">
              <div class="form-group">
                <label for="rss-language" data-i18n="settings.rssLanguage">Sprache</label>
                <select id="rss-language">
                  <option value="de-DE">Deutsch (de-DE)</option>
                  <option value="en-US">English (en-US)</option>
                  <option value="en-GB">English UK (en-GB)</option>
                  <option value="fr-FR">Français (fr-FR)</option>
                  <option value="es-ES">Español (es-ES)</option>
                  <option value="it-IT">Italiano (it-IT)</option>
                </select>
              </div>

              <div class="form-group">
                <label for="rss-copyright" data-i18n="settings.rssCopyright">Copyright</label>
                <input type="text" id="rss-copyright" placeholder="© 2026 Name">
              </div>

              <div class="form-group">
                <label for="rss-max-items" data-i18n="settings.rssMaxItems">Maximale Einträge</label>
                <input type="number" id="rss-max-items" min="5" max="100" value="20">
              </div>

              <div class="form-group">
                <label for="rss-ttl" data-i18n="settings.rssTtl">TTL (Minuten)</label>
                <input type="number" id="rss-ttl" min="1" max="1440" value="60">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Tab -->
      <div id="tab-data" class="tab-content hidden">
        <!-- Export Section -->
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.export">Export</h3>
          <p class="text-small text-muted mb-1" data-i18n="settings.exportHint">Create a backup of your data as a JSON file</p>
          <div class="export-options">
            <label class="radio-option">
              <input type="radio" name="export-type" value="all" checked>
              <span data-i18n="settings.exportAll">All (Settings + Articles)</span>
            </label>
            <label class="radio-option">
              <input type="radio" name="export-type" value="articles">
              <span data-i18n="settings.exportArticles">Articles only</span>
            </label>
            <label class="radio-option">
              <input type="radio" name="export-type" value="settings">
              <span data-i18n="settings.exportSettings">Settings only</span>
            </label>
          </div>
          <button type="button" id="export-btn" class="btn btn-secondary" style="margin-top: 1rem;">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span data-i18n="settings.exportBtn">Export</span>
          </button>
        </div>

        <!-- Import Section -->
        <div class="override-section">
          <h3 class="override-section-title" data-i18n="settings.import">Import</h3>
          <p class="text-small text-muted mb-1" data-i18n="settings.importHint">Import a backup from a JSON file</p>
          <div class="import-dropzone" id="import-dropzone">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <p><span data-i18n="settings.importDropzone">Drag file here or</span> <label class="import-browse"><span data-i18n="settings.importBrowse">browse</span><input type="file" id="import-file" accept=".json" hidden></label></p>
          </div>
        </div>

        <!-- Reset Section -->
        <div class="override-section">
          <h3 class="override-section-title danger-title" data-i18n="settings.reset">Reset</h3>
          <p class="text-small text-muted mb-1" data-i18n="settings.resetHint">Warning: These actions cannot be undone!</p>
          <div class="danger-zone">
            <button type="button" id="delete-all-btn" class="btn btn-danger">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
              <span data-i18n="settings.deleteAll">Delete all articles</span>
            </button>
            <button type="button" id="full-reset-btn" class="btn btn-danger">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>
              <span data-i18n="settings.fullReset">Full reset</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Logs Tab -->
      <div id="tab-logs" class="tab-content hidden">
        <!-- Logs Viewer Section -->
        <div class="override-section override-section-first">
          <h3 class="override-section-title" data-i18n="settings.logsSection">AUDIT LOGS</h3>
          <div class="logs-toolbar">
            <div class="logs-search-row">
              <input type="text" id="logs-search" class="logs-search" data-i18n-placeholder="settings.logsSearch" placeholder="Suche...">
              <select id="logs-filter" class="logs-filter">
                <option value="" data-i18n="settings.logsFilterAll">Alle Aktionen</option>
                <option value="login_success">Login erfolgreich</option>
                <option value="login_failed">Login fehlgeschlagen</option>
                <option value="logout">Logout</option>
                <option value="post_create">Post erstellt</option>
                <option value="post_delete">Post gelöscht</option>
                <option value="posts_delete_all">Alle Posts gelöscht</option>
                <option value="settings_update">Einstellungen geändert</option>
                <option value="csrf_failure">CSRF-Fehler</option>
                <option value="full_reset">Reset</option>
                <option value="audit_log_cleared">Logs gelöscht</option>
              </select>
            </div>
            <div class="logs-actions">
              <button type="button" id="logs-refresh-btn" class="btn btn-secondary">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="23 4 23 10 17 10"></polyline>
                  <polyline points="1 20 1 14 7 14"></polyline>
                  <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                </svg>
                <span data-i18n="settings.logsRefresh">Aktualisieren</span>
              </button>
              <button type="button" id="logs-export-btn" class="btn btn-secondary">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                <span data-i18n="settings.logsExport">Exportieren</span>
              </button>
              <button type="button" id="logs-clear-btn" class="btn btn-danger">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
                <span data-i18n="settings.logsClear">Löschen</span>
              </button>
            </div>
          </div>

          <div class="logs-table-container">
            <table class="logs-table">
              <thead>
                <tr>
                  <th data-i18n="settings.logsTime">Zeit</th>
                  <th data-i18n="settings.logsAction">Aktion</th>
                  <th data-i18n="settings.logsIP">IP</th>
                  <th data-i18n="settings.logsDetails">Details</th>
                </tr>
              </thead>
              <tbody id="logs-body">
                <tr class="logs-empty">
                  <td colspan="4" data-i18n="settings.logsLoading">Lade Logs...</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="logs-footer">
            <span id="logs-count" data-i18n="settings.logsCount">0 Einträge</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Overhead Card -->
  <div class="editor-card">
    <div class="card-header">
      <h2 class="card-title">Overhead</h2>
    </div>
    <div class="card-body card-body-with-rail">
      <div class="card-content">
        <div class="breakdown-table">
          <div class="breakdown-row">
            <span>Base</span>
            <span id="overhead-breakdown-base">0 B</span>
          </div>
          <div class="breakdown-row">
            <span>Title</span>
            <span id="overhead-breakdown-title">0 B</span>
          </div>
          <div class="breakdown-row">
            <span>Favicon</span>
            <span id="overhead-breakdown-favicon">0 B</span>
          </div>
          <div class="breakdown-row">
            <span>Meta</span>
            <span id="overhead-breakdown-meta">0 B</span>
          </div>
          <div class="breakdown-row">
            <span>Navigation</span>
            <span id="overhead-breakdown-nav">0 B</span>
          </div>
          <div class="breakdown-row">
            <span>Footer</span>
            <span id="overhead-breakdown-footer">0 B</span>
          </div>
          <div class="breakdown-row">
            <span>CSS</span>
            <span id="overhead-breakdown-css">0 B</span>
          </div>
          <div class="breakdown-row breakdown-row-total">
            <span>Total</span>
            <span id="overhead-breakdown-total">0 B / 14.336 B</span>
          </div>
        </div>
      </div>
      <div class="card-rail build-rail" style="justify-content: center;">
        <div class="build-progress">
          <div class="pie-chart" id="overhead-pie-chart">
            <span class="pie-percent" id="overhead-percent">0%</span>
          </div>
          <div class="pie-legend">
            <div class="pie-legend-item">
              <span class="pie-dot pie-dot-overhead"></span>
              <span data-i18n="overhead.title">Overhead</span>
            </div>
            <div class="pie-legend-item">
              <span class="pie-dot pie-dot-free"></span>
              <span data-i18n="overhead.available">Available</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Link Edit Popup -->
  <div id="link-popup" class="nav-link-popup hidden">
    <div class="popup-content">
      <div class="form-group">
        <label data-i18n="linkPopup.text">Text</label>
        <input type="text" id="link-text" data-i18n-placeholder="linkPopup.textPlaceholder" placeholder="Home">
      </div>
      <div class="form-group">
        <label data-i18n="linkPopup.target">Target</label>
        <input type="text" id="link-href" data-i18n-placeholder="linkPopup.targetPlaceholder" placeholder="/">
      </div>
      <div class="popup-actions">
        <button type="button" id="link-save" class="btn btn-primary" data-i18n="linkPopup.save">OK</button>
        <button type="button" id="link-delete" class="btn btn-danger btn-small hidden" data-i18n="linkPopup.delete">Delete</button>
        <button type="button" id="link-cancel" class="btn btn-secondary" data-i18n="linkPopup.cancel">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Modal System -->
  <div id="modal-backdrop" class="modal-backdrop hidden"></div>
  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <p id="modal-message"></p>
      <div id="modal-actions" class="popup-actions"></div>
    </div>
  </div>

  <!-- Import Modal -->
  <div id="import-modal" class="modal hidden">
    <div class="modal-content">
      <h3 style="margin: 0 0 1rem 0;" data-i18n="settings.importModal">Import backup</h3>
      <div id="import-modal-options"></div>
      <div id="import-progress" class="import-progress hidden">
        <div class="progress-bar">
          <div class="progress-fill" id="import-progress-fill"></div>
        </div>
        <p class="progress-text" id="import-progress-text" data-i18n="settings.importProgress">Importing...</p>
      </div>
      <div id="import-modal-actions" class="popup-actions"></div>
    </div>
  </div>


  <script type="module" src="/admin/app.js"></script>
  <script type="module" src="/admin/settings.js"></script>
</body>

</html>